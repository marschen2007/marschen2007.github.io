---
title: 為什麼 Layer 2 透通架構？
date: 2025-05-15 19:04:26
tags:
  - Layer 2
  - 網路架構
  - 技術解析
categories:
  - 技術筆記
---

# 為什麼 Layer 2 透通架構？

## 一、我的背景與觀點

我的網路職涯前半段十五年，專注於電信骨幹、國際互連與路由協定（BGP、ISIS、MPLS、QoS）。那是一個階層明確、邏輯清晰、可預測性極高的時代。Cisco CCIE（Routing & Switching）是當時的標竿，代表著結構與嚴謹設計的極致追求。

而後的十五年，我轉向企業網路與應用安全架構，涵蓋防火牆、負載平衡器與 Web Application Firewall（WAF）。然而，我一次又一次地遭遇一種讓我感到不解、甚至痛苦的設計選擇：**Layer 2 透通架構的持續存在**。

## 二、什麼是 Layer 2 透通架構？

所謂「L2 透通」，簡單來說就是把一台中介設備（如 WAF 或 IPS）**以透明橋接（bridge mode）嵌入兩台交換器之間**。

- 沒有 IP 地址
- 不改變任何一端的配置或預設閘道
- 流量在進出時被檢查處理，但整體網路層架構毫無變動

對導入設備的負責人來說，它看似是**最低風險的部署方式**：  
不需改設定、不必通知應用團隊、也不影響現有 IP 架構。

但對於追求架構階層性、可擴展性與可維運性的我而言，這是一種**犧牲長期彈性、換取短期省事的妥協**。  
我稱之為：**低責任型網路設計（Low Responsibility Architecture）**。

## 三、Layer 2 架構的技術代價與風險

### A. 架構與維運角度

1. **架構無層次、責任邊界模糊**  
   無法從 Layer 3 規劃拓樸，問題難以隔離。

2. **缺乏可視化與主動導控能力**  
   沒有 IP，就難以做 NAT、Proxy、PBR 等策略控制。

3. **問題排查只能靠 Wireshark**  
   沒有 routing table，不能 hop-by-hop trace，維運只能依賴封包分析。

4. **高可用策略支援困難**  
   需要外部網路搭配，設計不直觀。

5. **無法參與 Routing Decision 與流量學習**  
   損失智能導控能力。

### B. 安全與應用架構角度

1. **難以擔任策略節點（Policy Anchor）**  
   不具 IP 身份，難以扮演安全策略控制點。

2. **Fail Open/Bypass 是應急，不是架構設計**  
   許多企業誤將 bypass 視為高可用方案，實際上設備故障時網路將不設防。

### C. 人性與文化角度

1. **企業團隊對 Routing 不熟悉，不敢用 L3 架構**  
   多數人只熟靜態路由，缺乏設計信心。

2. **供應商傾向推動 L2 快速交付模式**  
   表面風險低、部署簡單。

3. **跨部門變革成本高**  
   改一個 IP 可能牽動 DNS、防火牆、應用設定，阻力大。

## 四、為什麼這樣的架構仍持續存在？

從用戶角度來看，**L2 是「最少阻力路徑」**：

- 不必跨部門協調  
- 不用動 DNS 或 IP  
- 不需理解 Routing、HA、VRRP、PBR 等概念

這讓它成為**預算控管與風險評估下的「最佳短期選擇」**。

但同時也積累了嚴重的**長期技術債**：

- 缺乏彈性
- 無法擴展
- 策略能見度與維運透明度皆低

## 五、結語：你的架構，就是你的價值選擇

我曾反思，是否是我太排斥臨時解法。但我越來越相信：  
**架構設計反映的是組織的風險哲學與長期思維。**

你選擇不配置 IP、不做 Routing、不管理流量，**不代表你沒有風險**。  
你不設定邊界，**不代表世界會給你安全的邊界**。

> Layer 2 可以是一種應急模式，但永遠不該成為你的主要架構設計。

---

*架構不是技術選項，而是責任選擇。選擇什麼樣的網路架構，實際上就是選擇什麼樣的組織文化與風險承擔方式。*
